import{d as q,e as j,g as x}from"./chunk-GRKPEBUD.js";import{a as Y}from"./chunk-3WWZO66B.js";import{a as V,b as m,c as D,d as A,g as H,i as L,j as G,n as U,o as z,q as B}from"./chunk-K76AGWZU.js";import"./chunk-WXI33M2S.js";import"./chunk-PLQB32H7.js";import{a as I,b as T}from"./chunk-O37MA7DD.js";import{k as R,m as k,o as O}from"./chunk-Q5ELIKLH.js";import{C as E,Hb as M,Jb as p,Oa as h,Ra as a,Sa as v,V as S,_ as F,a as y,b as _,da as N,eb as c,ib as l,lb as P,mb as t,nb as i,o as w,ob as d,vb as C,zb as o}from"./chunk-PUIGTLMT.js";var b=class r{constructor(n){this.http=n}apiUrl="http://localhost:3000/customer/register";register(n){let s=new I({"Content-Type":"application/json"}),e=_(y({},n),{role:"user"});return this.http.post(this.apiUrl,e,{headers:s}).pipe(E(u=>(console.error("Error en el registro:",u),w(()=>new Error("Hubo un problema con el registro.")))))}static \u0275fac=function(s){return new(s||r)(F(T))};static \u0275prov=S({token:r,factory:r.\u0275fac,providedIn:"root"})};var f=r=>({"is-invalid":r});function K(r,n){r&1&&(t(0,"div",35),o(1," El nombre es requerido y debe tener al menos 4 caracteres. "),i())}function Q(r,n){r&1&&(t(0,"div",35),o(1," El apellido es requerido y debe tener al menos 4 caracteres. "),i())}function W(r,n){r&1&&(t(0,"div",35),o(1," Por favor, ingresa un correo v\xE1lido. "),i())}function X(r,n){r&1&&(t(0,"div",36),o(1," La contrase\xF1a debe tener al menos 8 caracteres, un n\xFAmero y un car\xE1cter especial. "),i())}function ee(r,n){r&1&&(t(0,"div",35),o(1," Las contrase\xF1as no coinciden. "),i())}function te(r,n){r&1&&(t(0,"div",35),o(1," Por favor, ingresa un n\xFAmero de tel\xE9fono v\xE1lido (10 d\xEDgitos). "),i())}var $=class r{constructor(n,s,e,u){this.fb=n;this.customerService=s;this.router=e;this.toastr=u;this.registerForm=this.fb.group({firstName:["",[m.required,m.minLength(4)]],lastName:["",[m.required,m.minLength(4)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(8),m.pattern(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{8,}$/)]],confirmPassword:["",[m.required]],phone:["",[m.required,m.pattern(/^\d{10}$/)]]},{validators:this.matchPasswords("password","confirmPassword")})}registerForm;submitted=!1;passwordVisible=!1;get f(){return this.registerForm.controls}matchPasswords(n,s){return e=>{let u=e.get(n),g=e.get(s);g?.errors&&!g.errors.passwordMismatch||(u?.value!==g?.value?g?.setErrors({passwordMismatch:!0}):g?.setErrors(null))}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}onSubmit(){if(this.submitted=!0,this.registerForm.invalid)return;let n={firstName:this.f.firstName.value,lastName:this.f.lastName.value,email:this.f.email.value,hash_password:this.f.password.value,phone:this.f.phone.value,role:"user"};console.log("Datos enviados:",n),this.customerService.register(n).subscribe(s=>{console.log("Usuario registrado con \xE9xito:",s),this.toastr.success("Registro exitoso"),this.router.navigate(["/login"])},s=>{console.error("Error durante el registro:",s),this.toastr.warning("Hubo un error al registrar el usuario")})}static \u0275fac=function(s){return new(s||r)(v(z),v(b),v(q),v(Y))};static \u0275cmp=N({type:r,selectors:[["app-register"]],standalone:!0,features:[M],decls:55,vars:29,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center",2,"background-color","#f5f7fa"],[1,"row","w-100","align-items-center","justify-content-center"],[1,"col-md-6"],[1,"card","p-5","shadow-lg",2,"border-radius","15px"],[1,"text-center","mb-4"],[1,"text-center","text-muted","mb-4"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row","mb-4"],[1,"col-md-6","form-floating"],["id","firstName","type","text","formControlName","firstName","placeholder","Nombre","required","",1,"form-control",3,"ngClass"],["for","firstName"],["class","invalid-feedback",4,"ngIf"],["id","lastName","type","text","formControlName","lastName","placeholder","Apellido","required","",1,"form-control",3,"ngClass"],["for","lastName"],[1,"form-floating","mb-5"],["id","email","type","email","formControlName","email","placeholder","Correo Electr\xF3nico","required","",1,"form-control",3,"ngClass"],["for","email"],[1,"input-group"],[1,"form-floating","flex-grow-1"],["id","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control",3,"type","ngClass"],["for","password"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","invalid-feedback d-block",4,"ngIf"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirmar Contrase\xF1a","required","",1,"form-control",3,"ngClass"],["for","confirmPassword"],[1,"form-floating","mb-4"],["id","phone","type","text","formControlName","phone","placeholder","Tel\xE9fono","required","",1,"form-control",3,"ngClass"],["for","phone"],["type","submit",1,"btn","btn-success","w-100","mt-4",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-decoration-none"],[1,"col-md-6","d-none","d-md-block"],["src","/undraw_mobile_payments_re_7udl.svg","alt","Ilustraci\xF3n",1,"img-fluid"],["href",h`https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css`,"rel","stylesheet"],["href",h`https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css`,"rel","stylesheet"],[1,"invalid-feedback"],[1,"invalid-feedback","d-block"]],template:function(s,e){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),o(5,"Crea tu Cuenta"),i(),t(6,"p",5),o(7," \xDAnete a nuestra plataforma y disfruta de beneficios exclusivos. "),i(),t(8,"form",6),C("ngSubmit",function(){return e.onSubmit()}),t(9,"div",7)(10,"div",8),d(11,"input",9),t(12,"label",10),o(13,"Nombre"),i(),c(14,K,2,0,"div",11),i(),t(15,"div",8),d(16,"input",12),t(17,"label",13),o(18,"Apellido"),i(),c(19,Q,2,0,"div",11),i()(),t(20,"div",14),d(21,"input",15),t(22,"label",16),o(23,"Correo Electr\xF3nico"),i(),c(24,W,2,0,"div",11),i(),t(25,"div",7)(26,"div",2)(27,"div",17)(28,"div",18),d(29,"input",19),t(30,"label",20),o(31,"Contrase\xF1a"),i()(),t(32,"button",21),C("click",function(){return e.togglePasswordVisibility()}),d(33,"i"),i()(),c(34,X,2,0,"div",22),i(),t(35,"div",8),d(36,"input",23),t(37,"label",24),o(38,"Confirmar Contrase\xF1a"),i(),c(39,ee,2,0,"div",11),i()(),t(40,"div",25),d(41,"input",26),t(42,"label",27),o(43,"Tel\xE9fono"),i(),c(44,te,2,0,"div",11),i(),t(45,"button",28),o(46," Crear Cuenta "),i(),t(47,"p",29),o(48," \xBFYa tienes una cuenta? "),t(49,"a",30),o(50,"Iniciar sesi\xF3n"),i()()()()(),t(51,"div",31),d(52,"img",32),i()()(),d(53,"link",33)(54,"link",34)),s&2&&(a(8),l("formGroup",e.registerForm),a(3),l("ngClass",p(17,f,e.f.firstName.invalid&&e.f.firstName.touched||e.submitted)),a(3),l("ngIf",e.f.firstName.invalid&&e.f.firstName.touched||e.submitted),a(2),l("ngClass",p(19,f,e.f.lastName.invalid&&e.f.lastName.touched||e.submitted)),a(3),l("ngIf",e.f.lastName.invalid&&e.f.lastName.touched||e.submitted),a(2),l("ngClass",p(21,f,e.f.email.invalid&&e.f.email.touched||e.submitted)),a(3),l("ngIf",e.f.email.invalid&&e.f.email.touched||e.submitted),a(5),l("type",e.passwordVisible?"text":"password")("ngClass",p(23,f,e.f.password.touched&&e.f.password.invalid||e.submitted)),a(4),P(e.passwordVisible?"bi bi-eye-slash":"bi bi-eye"),a(),l("ngIf",e.f.password.touched&&e.f.password.invalid||e.submitted),a(2),l("ngClass",p(25,f,e.f.confirmPassword.touched&&e.f.confirmPassword.invalid||e.submitted)),a(3),l("ngIf",e.f.confirmPassword.invalid&&e.f.confirmPassword.touched||e.submitted),a(2),l("ngClass",p(27,f,e.f.phone.invalid&&e.f.phone.touched||e.submitted)),a(3),l("ngIf",e.f.phone.invalid&&e.f.phone.touched||e.submitted),a(),l("disabled",e.registerForm.invalid))},dependencies:[O,R,k,B,H,V,D,A,U,L,G,x,j],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.container-fluid[_ngcontent-%COMP%]{background-color:#f5f7fa;height:100vh}.card[_ngcontent-%COMP%]{border-radius:15px;max-width:650px;margin:auto;border:none;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 10px 30px #0000001a}.invalid-feedback[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#dc3545}.position-relative[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:40px}.position-relative[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   .eye-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);border:none;background:none;cursor:pointer;padding:0}.img-fluid[_ngcontent-%COMP%]{max-height:90vh;object-fit:contain;display:block;margin:auto}a[_ngcontent-%COMP%]{cursor:pointer}.form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-1.5rem);font-size:.85rem;opacity:.8}']})};export{$ as RegisterComponent};
