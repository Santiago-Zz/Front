import{d as p}from"./chunk-GRKPEBUD.js";import{b as l}from"./chunk-O37MA7DD.js";import{R as a,V as s,_ as n}from"./chunk-PUIGTLMT.js";var c=class o{constructor(t,e){this.http=t;this.router=e}apiUrl="http://localhost:3000/customer/login";tokenKey="authToken";login(t,e){let i={email:t,password:e};return this.http.post(this.apiUrl,i).pipe(a(r=>{r.token&&(console.log(r.token),this.setToken(r.token))}))}setToken(t){localStorage.setItem(this.tokenKey,t)}getToken(){return localStorage.getItem(this.tokenKey)}isAuthenticated(){let t=this.getToken();if(!t)return!1;let i=JSON.parse(atob(t.split(".")[1])).exp*1e3;return Date.now()<i}logout(){localStorage.removeItem(this.tokenKey),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)(n(l),n(p))};static \u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
