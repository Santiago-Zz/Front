import{a as L}from"./chunk-YBBVXVAR.js";import{b as B,e as N,g as D}from"./chunk-GRKPEBUD.js";import{a as V}from"./chunk-PJICVWY7.js";import{a as z}from"./chunk-3WWZO66B.js";import{p as R}from"./chunk-K76AGWZU.js";import"./chunk-WXI33M2S.js";import"./chunk-PLQB32H7.js";import"./chunk-O37MA7DD.js";import{k as F,l as I,m as A,n as $,o as j}from"./chunk-Q5ELIKLH.js";import{Ab as f,Bb as w,Hb as S,Ib as M,Jb as k,Kb as T,Lb as O,Mb as E,Na as C,Ra as c,Sa as u,da as x,eb as g,ib as a,kb as y,ma as _,mb as i,na as h,nb as o,ob as s,rb as v,vb as m,wb as p,xb as P,zb as r}from"./chunk-PUIGTLMT.js";var q=(l,t)=>({"col-md-12":l,"col-md-9":t}),J=()=>["/create-product"],G=l=>["/edit-product",l];function H(l,t){l&1&&(i(0,"div",32)(1,"button",33),s(2,"i",34),r(3," Crear nuevo producto "),o()()),l&2&&(c(),a("routerLink",M(1,J)))}function K(l,t){if(l&1&&(i(0,"li",35)(1,"label",36),s(2,"input",37),r(3),o(),i(4,"span",38),r(5),o()()),l&2){let e=t.$implicit;c(2),a("value",e.name),c(),w(" ",e.name," "),c(2),f(e.count)}}function Q(l,t){if(l&1&&(i(0,"button",52),s(1,"i",53),r(2," Editar "),o()),l&2){let e=p().$implicit;a("routerLink",k(1,G,e.products_Id))}}function W(l,t){if(l&1){let e=v();i(0,"button",54),m("click",function(){_(e);let d=p().$implicit,b=p();return h(b.deleteProduct(d.products_Id))}),s(1,"i",55),r(2," Eliminar "),o()}}function X(l,t){if(l&1){let e=v();i(0,"button",56),m("click",function(){_(e);let d=p().$implicit,b=p();return h(b.addToCart(d))}),s(1,"i",57),r(2," Agregar al carrito "),o()}}function Y(l,t){if(l&1&&(i(0,"div",39)(1,"div",40)(2,"div",41),s(3,"img",42),o(),i(4,"div",43)(5,"div",44)(6,"h5",45),r(7),o(),i(8,"h5",46),r(9),O(10,"currency"),o()(),i(11,"p",47),r(12),o()(),i(13,"div",48),g(14,Q,3,3,"button",49)(15,W,3,0,"button",50)(16,X,3,0,"button",51),o()()()),l&2){let e=t.$implicit,n=p();c(3),P("alt",e.name),a("src",e.image_url,C),c(4),f(e.name),c(2),f(E(10,8,e.price)),c(3),f(e.description||"Descripci\xF3n no disponible."),c(2),a("ngIf",n.isAdmin),c(),a("ngIf",n.isAdmin),c(),a("ngIf",!n.isAdmin)}}var U=class l{constructor(t,e,n,d){this.productService=t;this.route=e;this.toastr=n;this.cartService=d}brands=[{name:"Marca A",count:37},{name:"Marca B",count:30},{name:"Marca C",count:16},{name:"Marca D",count:14}];products=[];categoryId;minPrice=0;maxPrice=0;showFilters=!1;showSort=!0;isAdmin=!1;showCreateForm=!1;loading=!1;ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("categoryId"));t&&(console.log("ID de la categor\xEDa:",t),this.loadProductsByCategory(Number(t)));let e=localStorage.getItem("authToken");if(e){let n=this.decodeToken(e);n&&n.role==="admin"?this.isAdmin=!0:this.isAdmin=!1,console.log("isAdmin:",this.isAdmin)}else console.error("No se encontr\xF3 ning\xFAn token en localStorage.")}loadProductsByCategory(t){this.productService.getProductsByCategory(t).subscribe(e=>{this.products=e,console.log("Productos cargados:",this.products)},e=>{console.error("Error al cargar productos:",e)})}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(e){return console.error("Error decodificando el token:",e),null}}editProduct(t){this.isAdmin&&console.log(`Editando el producto con ID: ${t.products_Id}`)}deleteProduct(t){console.log("ID del producto a eliminar:",t),this.isAdmin&&this.productService.deleteProduct(t).subscribe(()=>{this.loadProductsByCategory(this.categoryId),this.toastr.warning("El producto fue eliminado con \xE9xito.","Producto eliminado")})}toggleFilters(){console.log("toggleFilters:",this.toggleFilters),this.showFilters=!this.showFilters;let t=document.getElementById("filterText");t&&(t.textContent=this.showFilters?"Ocultar filtros":"Mostrar filtros")}sort(t){t==="asc"?this.products.sort((e,n)=>e.price-n.price):t==="desc"&&this.products.sort((e,n)=>n.price-e.price),console.log("productos ordenados: ",this.products)}applyPriceFilter(t,e){(t===void 0||e===void 0)&&(t=this.minPrice,e=this.maxPrice),console.log(`Aplicando filtro de precio: ${t} - ${e}`)}addToCart(t){this.cartService.addToCart(t),console.log(`${t.name} agregado al carrito`)}static \u0275fac=function(e){return new(e||l)(u(V),u(B),u(z),u(L))};static \u0275cmp=x({type:l,selectors:[["app-technology"]],standalone:!0,features:[S],decls:57,vars:11,consts:[[1,"container-fluid","mt-4"],["class","my-3",4,"ngIf"],[1,"row","d-flex-wrap"],[1,"col-md-12","d-flex","justify-content-end","mb-5","gap-2"],["id","toggleFiltersBtn",1,"btn","btn-outline-primary","d-flex","align-items-center",3,"click"],[1,"bi","bi-funnel"],["id","filterText",1,"ms-2"],[1,"dropdown"],["type","button","id","dropdownSortButton","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle","d-flex","align-items-center"],[1,"bi","bi-sort-down-alt"],[1,"ms-2"],["aria-labelledby","dropdownSortButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["id","filterMenu",1,"col-md-3","filters","bg-light","p-3","shadow-lg","rounded"],[1,"mb-4"],[1,"filter-group","mb-4"],[1,"text-primary"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"d-flex","mb-2"],[1,"input-group","me-2"],[1,"input-group-text"],["type","number","placeholder","Min",1,"form-control"],[1,"input-group"],["type","number","placeholder","Max",1,"form-control"],[1,"btn","btn-primary","w-100",3,"click"],[3,"ngClass"],[1,"container","mt-5"],[1,"products"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"my-3"],[1,"btn","btn-outline-danger","d-flex","align-items-center",3,"routerLink"],[1,"bi","bi-plus-circle","me-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"form-check-label","d-flex","align-items-center"],["type","checkbox",1,"form-check-input","me-2",3,"value"],[1,"badge","bg-primary","rounded-pill"],[1,"col"],[1,"card","text-dark","bg-white","shadow-sm","rounded-lg","h-100"],[1,"overflow-hidden","rounded-top",2,"height","180px"],[1,"card-img-top",2,"object-fit","contain","width","100%","height","100%",3,"src","alt"],[1,"card-body"],[1,"d-flex","justify-content-between","mb-2","gap-2"],[1,"card-title","mb-0"],[1,"card-title","mb-0","text-primary"],[1,"card-text","text-muted","mt-2"],[1,"card-footer","bg-white","border-0","d-flex","justify-content-between"],["class","btn btn-outline-warning",3,"routerLink",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],["class","btn btn-success w-100 text-uppercase fw-bold py-2",3,"click",4,"ngIf"],[1,"btn","btn-outline-warning",3,"routerLink"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-success","w-100","text-uppercase","fw-bold","py-2",3,"click"],[1,"bi","bi-cart-plus","me-2"]],template:function(e,n){e&1&&(i(0,"div",0),g(1,H,4,2,"div",1),i(2,"div",2)(3,"div",3)(4,"button",4),m("click",function(){return n.toggleFilters()}),s(5,"i",5),i(6,"span",6),r(7,"Mostrar filtros"),o()(),i(8,"div",7)(9,"button",8),s(10,"i",9),i(11,"span",10),r(12,"M\xE1s reciente"),o()(),i(13,"ul",11)(14,"li")(15,"a",12),m("click",function(){return n.sort("desc")}),r(16,"Precio: alto-bajo"),o()(),i(17,"li")(18,"a",12),m("click",function(){return n.sort("asc")}),r(19,"Precio: bajo-alto"),o()()()()(),i(20,"aside",13)(21,"h3",14),r(22,"Filtrar"),o(),i(23,"div",15)(24,"h5",16),r(25,"Marcas"),o(),i(26,"ul",17),g(27,K,6,3,"li",18),o()(),i(28,"div",15)(29,"h5",16),r(30,"Rango de precios"),o(),i(31,"ul",17)(32,"li",19),m("click",function(){return n.minPrice=0,n.maxPrice=25e4,n.applyPriceFilter()}),r(33," $0 - $250.000 "),o(),i(34,"li",19),m("click",function(){return n.minPrice=250001,n.maxPrice=5e5,n.applyPriceFilter()}),r(35," $250.000 - $500.000 "),o(),i(36,"li",19),m("click",function(){return n.minPrice=500001,n.maxPrice=1e6,n.applyPriceFilter()}),r(37," $500.000 - $1.000.000 "),o()()(),i(38,"div",15)(39,"h5",16),r(40,"Rango personalizado"),o(),i(41,"div",20)(42,"div",21)(43,"span",22),r(44,"$"),o(),s(45,"input",23),o(),i(46,"div",24)(47,"span",22),r(48,"$"),o(),s(49,"input",25),o()(),i(50,"button",26),m("click",function(){return n.applyPriceFilter()}),r(51,"Aplicar"),o()()(),i(52,"div",27)(53,"div",28)(54,"div",29)(55,"div",30),g(56,Y,17,10,"div",31),o()()()()()()),e&2&&(c(),a("ngIf",n.isAdmin),c(19),y("hidden",!n.showFilters),c(7),a("ngForOf",n.brands),c(25),a("ngClass",T(8,q,!n.showFilters,n.showFilters)),c(2),y("expanded",!n.showFilters),c(2),a("ngForOf",n.products))},dependencies:[j,F,I,A,$,R,D,N],styles:['@charset "UTF-8";.container-fluid[_ngcontent-%COMP%]{margin:20px}.filters[_ngcontent-%COMP%]{max-width:450px;height:100%;display:flex;flex-direction:column;justify-content:flex-start;margin-bottom:20px}.filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{margin-bottom:20px}.filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.apply-btn[_ngcontent-%COMP%]{margin-bottom:0}.d-flex[_ngcontent-%COMP%]{gap:10px}.card[_ngcontent-%COMP%]{margin-bottom:20px;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.card-body[_ngcontent-%COMP%]{padding:15px}.card-footer[_ngcontent-%COMP%]{padding:10px}.card-img-top[_ngcontent-%COMP%]{object-fit:contain!important}.btn-outline-warning[_ngcontent-%COMP%], .btn-outline-danger[_ngcontent-%COMP%]{margin:5px;transition:background-color .2s ease,color .2s ease}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#dcca06;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.btn-success[_ngcontent-%COMP%]{margin-top:10px}#toggleFiltersBtn[_ngcontent-%COMP%], .dropdown-toggle[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem 1rem;margin-right:5px;display:inline-flex!important;visibility:visible!important;opacity:1!important}#dropdownSortButton[_ngcontent-%COMP%]{margin-right:25px}.hidden[_ngcontent-%COMP%]{display:none!important}.btn[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;display:inline-flex!important;align-items:center}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.products[_ngcontent-%COMP%]{width:100%;margin-left:0}#toggleFiltersBtn[_ngcontent-%COMP%], .dropdown-toggle[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem .8rem}.apply-btn[_ngcontent-%COMP%]{width:100%}}.card[_ngcontent-%COMP%]:hover   .card-body[_ngcontent-%COMP%]{background-color:#f8f9fa}']})};export{U as TechnologyComponent};
